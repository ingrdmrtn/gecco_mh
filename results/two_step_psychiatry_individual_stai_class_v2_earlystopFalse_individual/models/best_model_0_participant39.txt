class ParticipantModel2(CognitiveModelBase):
    """
    HYPOTHESIS: Anxiety imposes a global cognitive load that degrades working memory 
    for all value representations over time. Unlike "attentional narrowing" which 
    affects only unchosen options, this hypothesis suggests anxiety causes a 
    generalized rapid decay of all learned associations (both Stage 1 and Stage 2).
    
    Mechanism:
    At the end of every trial, ALL Q-values (Stage 1 and Stage 2) decay towards 
    zero based on the STAI score.
    
    Q(t+1) = Q(t) * (1 - (decay_rate * STAI))

    Parameter Bounds:
    -----------------
    alpha: [0, 1]
    beta: [0, 10]
    decay_rate: [0, 1]
    """
    def unpack_parameters(self, model_parameters: tuple) -> None:
        self.alpha, self.beta, self.decay_rate = model_parameters

    def post_trial(self, action_1: int, state: int, action_2: int, reward: float) -> None:
        super().post_trial(action_1, state, action_2, reward)
        
        # Calculate decay factor modulated by anxiety
        decay = self.decay_rate * self.stai
        decay = np.clip(decay, 0, 1)
        
        # Apply global decay to all value representations
        self.q_stage1 *= (1.0 - decay)
        self.q_stage2 *= (1.0 - decay)

cognitive_model2 = make_cognitive_model(ParticipantModel2)